(this["webpackJsonpslate-demo"]=this["webpackJsonpslate-demo"]||[]).push([[0],{223:function(e,t,n){},241:function(e,t,n){},479:function(e,t,n){"use strict";n.r(t);var c,r,i=n(0),a=n(31),s=n.n(a),l=(n(223),n(29)),o=(n(224),n(218)),u=n.n(o),d=(n(111),n(72)),j=n.n(d),b=n(5),h=(n(241),n(36)),O=n(3);!function(e){e.bold="bold",e.code="code",e.italic="italic",e.underline="underline",e.color="color",e.background="background"}(c||(c={})),function(e){e.orderList="orderList",e.listItem="listItem",e.table="table",e.tableData="tableData",e.unOrderList="unOrderList",e.image="image",e.link="link"}(r||(r={}));var p=n(12);function x(e){var t=e.attributes,n=e.children,r=e.leaf,i={};return n||(n=Object(p.jsx)(p.Fragment,{})),r[c.bold]&&(i=Object.assign(i,r[c.bold])),r[c.italic]&&(i=Object.assign(i,r[c.italic])),r[c.underline]&&(i=Object.assign(i,r[c.underline])),r[c.color]&&(i=Object.assign(i,r[c.color])),r[c.background]&&(i=Object.assign(i,r[c.background])),Object(p.jsx)("span",Object(l.a)(Object(l.a)({},t),{},{style:i,children:n}))}var f=n(204),y=n(205),g=n(206),m=n(207),v=n(208),w=n(209),k=n(210),E=n(211),L=(n(61),n(39)),D=n.n(L),K=n(16),N=function(e,t){var n,c=O.a.nodes(e,{match:function(e){return!O.a.isEditor(e)&&O.b.isElement(e)&&e.type===t}}),r=Object(K.a)(c);try{for(r.s();!(n=r.n()).done;){if(n.value[0].type===t)return!0}}catch(i){r.e(i)}finally{r.f()}return!1},I=new Map;I.set(r.orderList,r.listItem),I.set(r.unOrderList,r.listItem);function S(e){var t=e.type,n=(e.value,e.icon),c=Object(h.e)();return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(D.a,{icon:n,onMouseDown:function(){c.selection&&function(e,t,n){var c=N(e,t),r=I.has(t);O.h.unwrapNodes(e,{split:!0,match:function(e){return!O.a.isEditor(e)&&O.b.isElement(e)&&I.has(e.type)}}),c?O.h.unsetNodes(e,"type"):O.h.setNodes(e,{type:r?I.get(t):t}),!c&&r&&O.h.wrapNodes(e,{type:t,children:[]})}(c,t)},type:N(c,t)?"primary":"text",children:t})})}var C,F,M=n(217),T=(n(165),n(71)),R=n.n(T),_=function(e){e=e.trim();return/(((^https?:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+(?::\d+)?|(?:www.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%\/.\w-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[\w]*))?)$/.test(e)},A=function(e){O.h.unwrapNodes(e,{match:function(e){return!O.a.isEditor(e)&&O.b.isElement(e)&&e.type===r.link}})},Y=function(e,t){(function(e){var t=O.a.nodes(e,{match:function(e){return!O.a.isEditor(e)&&O.b.isElement(e)&&e.type===r.link}});return!!Object(b.a)(t,1)[0]})(e)&&A(e);var n=e.selection,c=n&&O.f.isCollapsed(n),i={type:"link",url:t,children:c?[{text:t}]:[]};c?O.h.insertNodes(e,i):(O.h.wrapNodes(e,i,{split:!0}),O.h.collapse(e,{edge:"end"}))},H=function(e){var t=e.insertData,n=e.isVoid,c=e.isInline;return e.isVoid=function(e){return e.type===r.image||n(e)},e.isInline=function(e){return e.type===r.link||c(e)},e.insertData=function(n){var c=n.getData("text/plain");_(c)?function(e,t){e.selection&&Y(e,t)}(e,"  "+c):t(n)},e},P=(n(302),n(215)),q=n.n(P),z=(n(304),n(216)),W=n.n(z);function B(e){var t=e.type,n=e.icon,c=Object(h.f)(),a=Object(i.useState)(""),s=Object(b.a)(a,2),l=s[0],o=s[1],u=Object(i.useState)(!1),d=Object(b.a)(u,2),j=d[0],x=d[1],f=Object(i.useState)(null),y=Object(b.a)(f,2),g=y[0],m=y[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(q.a,{title:"\u8bf7\u8f93\u5165\u56fe\u7247url",visible:j,onOk:function(){if(!_(l))return R.a.error("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u56fe\u7247URL");!function(e,t,n){_(t)?O.h.insertNodes(e,{type:r.image,url:t,children:[{text:t}]},{at:n||e.selection||O.a.end(e,[])}):R.a.error("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u56fe\u7247URL")}(c,l,g||c.selection),x(!1),o("")},onCancel:function(){return x(!1)},getContainer:!1,children:Object(p.jsx)(W.a,{placeholder:"\u8bf7\u8f93\u5165\u56fe\u7247url",onChange:function(e){o(e.target.value)},value:l})}),Object(p.jsx)(D.a,{icon:n,onMouseDown:function(e){e.preventDefault(),x(!0),m(c.selection)},type:"text",children:t})]})}!function(e){e.ALT_KEY="altKey",e.SHIFT_KEY="shiftKey",e.CTRL_KEY="ctrlKey",e.META_KEY="metaKey"}(C||(C={})),function(e){e.ENTER="Enter",e.DEL="Backspace"}(F||(F={}));var J=new Map;J.set(F.ENTER,(function(e,t){var n=O.a.nodes(e,{match:function(e){return!O.a.isEditor(e)&&O.b.isElement(e)&&e.type===r.link}});return Object(b.a)(n,1)[0]&&(O.h.insertNodes(e,{children:[{text:""}]}),t.preventDefault()),!1}));var G=function(e,t){var n=[C.CTRL_KEY,C.SHIFT_KEY,C.META_KEY,C.ALT_KEY].reduce((function(t,n){return t+(e[n]?n:"")}),"");if(J.has(n+e.key)){var c=J.get(n+e.key);c&&c(t,e)&&e.preventDefault()}},V=function(e,t){if(!e.selection)return!1;var n=O.a.marks(e);return!!n&&n[t]};function $(e){var t=e.type,n=e.value,c=e.icon,r=Object(h.e)();return Object(p.jsx)(D.a,{icon:c,onMouseDown:function(){!function(e,t,n){V(e,t)?O.a.removeMark(e,t):O.a.addMark(e,t,n)}(r,t,n)},type:V(r,t)?"primary":"text",children:t})}function U(e){var t=e.element,n=e.attributes,c=e.children,r=Object(h.d)(),i=Object(h.c)();return Object(p.jsxs)("span",Object(l.a)(Object(l.a)({},n),{},{children:[Object(p.jsx)("span",{contentEditable:"false",suppressContentEditableWarning:!0,children:Object(p.jsx)("img",{src:t.url,alt:"\u56fe\u7247",style:{maxWidth:"100%",maxHeight:"20em",boxShadow:"".concat(r&&i?"0 0 0 3px #B4D5FF":"none")}})}),c]}))}var Z=n(202),Q=n(203);function X(e){var t=e.children,n=e.element,c=n.url,r=n.css,i=r?r.reduce((function(e,t){return Object.assign(e,t)}),{}):{},a=Object(h.f)(),s=Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(D.a,{type:"text",onClick:function(){return window.open(c)},children:[Object(p.jsx)(Z.a,{}),"\u8bbf\u95ee"]}),Object(p.jsxs)(D.a,{type:"text",onClick:function(){return A(a)},children:[Object(p.jsx)(Q.a,{}),"\u53d6\u6d88\u94fe\u63a5"]})]});return Object(p.jsx)("span",{children:Object(p.jsx)(j.a,{title:s,placement:"bottom",color:"white",trigger:"click",children:Object(p.jsx)("a",{href:c,style:i,children:t})})})}var ee=[h.g,M.a,H];function te(e){var t=e.nodes,n=e.setNodeList,a=Object(i.useMemo)((function(){return ee.reduce((function(e,t){return t(e)}),Object(O.i)())}),[]),s=Object(i.useCallback)((function(e){return Object(p.jsx)(x,Object(l.a)(Object(l.a)({},e),{},{children:e.children}))}),[]);return Object(p.jsx)("div",{className:"slate-editor",children:Object(p.jsxs)(h.b,{value:t,editor:a,onChange:n,children:[Object(p.jsx)($,{icon:Object(p.jsx)(f.a,{}),type:c.bold,value:{fontWeight:"bold"}}),Object(p.jsx)($,{icon:Object(p.jsx)(y.a,{}),type:c.italic,value:{fontStyle:"oblique"}}),Object(p.jsx)($,{icon:Object(p.jsx)(g.a,{}),type:c.underline,value:{textDecoration:"underline"}}),Object(p.jsx)($,{icon:Object(p.jsx)(m.a,{}),type:c.color,value:{color:"green"}}),Object(p.jsx)($,{icon:Object(p.jsx)(v.a,{}),type:c.background,value:{background:"red"}}),Object(p.jsx)(S,{icon:Object(p.jsx)(w.a,{}),type:r.orderList,value:[]}),Object(p.jsx)(S,{icon:Object(p.jsx)(k.a,{}),type:r.unOrderList,value:[]}),Object(p.jsx)(B,{icon:Object(p.jsx)(E.a,{}),type:r.image}),Object(p.jsx)("hr",{}),Object(p.jsx)(h.a,{renderElement:function(e){var t=e.element,n=e.attributes,c=e.children,i=t.css?t.css.reduce((function(e,t){return Object.assign(e,t)}),{}):{};switch(n=Object.assign(n,{style:i}),t.type){case r.orderList:return Object(p.jsx)("ol",Object(l.a)(Object(l.a)({},n),{},{children:c}));case r.unOrderList:return Object(p.jsx)("ul",Object(l.a)(Object(l.a)({},n),{},{children:c}));case r.listItem:return Object(p.jsx)("li",Object(l.a)(Object(l.a)({},n),{},{children:c}));case r.image:return Object(p.jsx)(U,Object(l.a)(Object(l.a)({},e),{},{children:e.children}));case r.link:return Object(p.jsx)(X,Object(l.a)(Object(l.a)({},e),{},{children:e.children}));default:return Object(p.jsx)("p",Object(l.a)(Object(l.a)({},n),{},{children:c}))}},renderLeaf:s,onKeyDown:function(e){return G(e,a)},placeholder:"rich demo",spellCheck:!0,autoFocus:!0})]})})}var ne=[{children:[{text:"\u4f7f\u7528Slate + TypeScript + React Hook + Antd\u5b9e\u73b0\u7684\u6570\u636e\u9a71\u52a8\u7684\u5bcc\u6587\u672c\u7f16\u8f91\u5668\uff0c\u6682\u65f6\u4e0d\u652f\u6301\u4ee3\u7801\u9ad8\u4eae\uff0c\u4f7f\u7528\u7c7b\u4f3cVirtual Dom\u7684\u673a\u5236\u548c\u601d\u60f3\u53bb\u5b9e\u73b0\u7f16\u8f91\u5668\u529f\u80fd.\u6269\u5c55\u6027\u5c06\u66f4\u597d"}]},{type:"image",url:"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg",children:[{text:"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg"}]},{children:[{text:"this is text",bold:{fontWeight:"bold"},italic:{fontStyle:"oblique"}}]},{children:[{text:"underline",underline:{textDecoration:"underline"}}]},{type:"orderList",children:[{children:[{text:"\u6709\u987a\u5e8f\u5217\u8868"}],type:"listItem"},{type:"listItem",children:[{text:"\u6709\u987a\u5e8f\u5217\u8868\u5e26\u52a0\u7c97\u6837\u5f0f",bold:{fontWeight:"bold"}}]}]},{type:"unOrderList",children:[{children:[{text:"\u65e0\u987a\u5e8f\u5217\u8868"}],type:"listItem"},{type:"listItem",children:[{text:"\u65e0\u987a\u5e8f\u5217\u8868\u5e26\u6837\u5f0f",color:{color:"green"}}]}]},{children:[{text:""},{type:"link",url:"  https://ant.design/components/icon-cn/",children:[{text:"antd\u5b98\u7f51"}]},{text:" \u70b9\u51fb\u5373\u53ef\u8bbf\u95ee"},{type:"link",url:"  https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg",children:[{text:""}]},{text:""}]},{children:[{text:""}]},{children:[{text:""}]}];var ce=function(){var e=Object(i.useState)(ne),t=Object(b.a)(e,2),n=t[0],c=t[1];n.length<1&&c([{children:[{text:""}]}]),Object.prototype.hasOwnProperty.call(n[n.length-1],"type")&&c(n.concat({children:[{text:""}]}));var r={columns:[{title:"\u8282\u70b9\u7c7b\u578b",dataIndex:"type",key:"type",width:100},{title:"\u8282\u70b9value",dataIndex:"children",key:"children",width:100,render:function(e){return Object(p.jsx)(j.a,{color:"white",title:Object(p.jsx)("pre",{style:{color:"black"},children:JSON.stringify(e,null,2)}),children:Object(p.jsx)("p",{style:{width:100,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},children:JSON.stringify(e)})})}}],pagination:!1,rowKey:function(){return Math.random()},dataSource:n};return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)("div",{className:"node-list",children:Object(p.jsx)(u.a,Object(l.a)({},r))}),Object(p.jsx)(te,{nodes:n,setNodeList:c})]})},re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,487)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))};s.a.render(Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(ce,{})}),document.getElementById("root")),re()}},[[479,1,2]]]);
//# sourceMappingURL=main.c04b498f.chunk.js.map